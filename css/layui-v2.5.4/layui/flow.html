<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>upload模块快速使用</title>
  <link rel="stylesheet" href="css/layui.css" media="all">
</head>
<style type="text/css">
			#box{
				width:80%;
				margin:0 auto;
			}
			#box li{
				list-style: none;
				width:180px;
				height:250px;
				border: 1px solid black;
				float:left;
				margin-left: 20px;
				margin-top: 20px;
			}
			#box img{
				width:100%;
				height:100%;
			}
		</style>
<body>
<div id='box'>
			<li><img alt="懒加载" _src="img/1.png"/></li>
			<li><img alt="懒加载" _src="img/1.png"/></li>
			<li><img alt="懒加载" _src="img/1.png"/></li>
			<li><img alt="懒加载" _src="img/1.png"/></li>
			<li><img alt="懒加载" _src="img/1.png"/></li>
			<li><img alt="懒加载" _src="img/1.png"/></li>
			<li><img alt="懒加载" _src="img/1.png"/></li>
			<li><img alt="懒加载" _src="img/1.png"/></li>
		</div>
<script src="js/jquery-3.3.1.js"></script>
<script src="./layui.js"></script>

<script>
/*layui.use('flow', function(){
  var flow = layui.flow;
  flow.load({
    elem: '#demo' //指定列表容器
    ,done: function(page, next){ //到达临界点（默认滚动触发），触发下一页
			console.log(page)
			console.log(next)
      //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）
			var object="";
			var type="";
			var region="";
			var username="13076920054"
			var pageNo='1'
			var pageSize='2'
			var state='0'
			$.ajax({
				type: 'get',
				url: 'http://112.74.126.51/earlyWarn/AppProjectList.action',
				data: 'username=' + username+ '&region=' + region+ '&pageNo=' + page+ '&object=' + object+ '&pageSize=' + pageSize+ '&state=' + state,
				error: function (error) {
						console.log(error)
				},
				success: function (result) {
						var res = JSON.parse(result);
						console.log(res)
						var data = res.list[0].mess;
						var html="";
						for (var item of data) {
								var {
										name,
										num,
										location,
										pid,
								} = item;
								html += `<div style="margin: 10px 4px 0px;" class="tab3_main_all">
								<div class="main_detail" style="        border-bottom: 1px solid #8b8b8b;padding-bottom: 10px;">
										<a href="tab3_zi_detail.html?pid=${pid}"class="tab_3-media-box tab_3-media-box_appmsg" >
												<div class="tab_3-media-box__hd">
														<img src="../images/drawable-hdpi/projectlist_red.png" alt="" class="main_img tab_3-media-box__thumb ">
												</div>
												<div class="tab_3-media-box__bd">
														<div style="display:flex;justify-content:flex-start;">
																<p class="tab_3-media-box__title" lname="${name}">${name}</p>
																<p class="tab_3-media-box__title" ><img src="../images/drawable-hdpi/devicelist_b_0.png" alt=""></p>
																<p class="tab_3-media-box__title" style="color:#3cf;">${num}</p>
														</div>           
														<p class="tab_3-media-box__desc" xname="${location}">${location}</p>    
												</div>
												<div>
														<p class="tab_3-media-box-small_box" style="display:none">
																<input type="checkbox"  value="${pid}" style="width:20px;height:20px;">
														</p>
												</div>
										</a>
								</div > 
						</div>`;
						}
						//$('#demo').html(html);
				}
			})
    }
  });
	
      setTimeout(function(){
        var lis = [];
        for(var i = 0; i < 8; i++){
          lis.push('<li>'+ ( (page-1)*8 + i + 1 ) +'</li>')
        }
        
        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
        next(lis.join(''), page < 10); //假设总页数为 10
      }, 500);
	
  
});*/
		var aImage = document.getElementsByTagName('img');
		console.log(aImage)
		//获取可视区高度
		var height = document.documentElement.clientHeight;
		console.log(height)
		//当滚动时触发
		window.onload = window.onscroll = function(){
			//得到滚动卷起高度
			var scrollTop = document.documentElement.scrollTop;
			//遍历所有图片
			for(var i = 0 ; i < aImage.length ; i++ ){
				//获取该图片举例网页顶部和可视区高度,判断是否显示
				//距网页顶部高度
				var top = aImage[i].offsetTop;
				console.log('scrollTop='+scrollTop);
				//console.log(top +"<="+ height + scrollTop);
				if(top <=  height + scrollTop){
					aImage[i].src = aImage[i].getAttribute('_src');
				}
			}
			
		};


</script>
</body>
</html>